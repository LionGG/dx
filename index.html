<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>A股市场短线情绪走势</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft YaHei', sans-serif; background: #0d1117; color: #c9d1d9; min-height: 100vh; padding: 12px; }
        .container { max-width: 1400px; margin: 0 auto; }
        .header { text-align: center; margin-bottom: 16px; padding: 12px 0; border-bottom: 1px solid #30363d; }
        .header h1 { font-size: 20px; color: #58a6ff; font-weight: 600; }
        .chart-container { background: #161b22; border: 1px solid #30363d; border-radius: 12px; padding: 16px; margin-bottom: 16px; }
        .chart-title { font-size: 15px; color: #c9d1d9; font-weight: 600; margin-bottom: 12px; padding-left: 8px; border-left: 3px solid #58a6ff; display: flex; justify-content: space-between; align-items: center; }
        .index-selector { background: #21262d; color: #c9d1d9; border: 1px solid #30363d; border-radius: 6px; padding: 4px 8px; font-size: 12px; cursor: pointer; }
        #klineChart { width: 100%; height: 320px; }
        #sentimentChart, #strengthChart { width: 100%; height: 260px; }
        .data-table { background: #161b22; border: 1px solid #30363d; border-radius: 12px; padding: 16px; overflow-x: auto; -webkit-overflow-scrolling: touch; }
        .data-table h3 { font-size: 15px; color: #c9d1d9; margin-bottom: 12px; font-weight: 600; padding-left: 8px; border-left: 3px solid #58a6ff; }
        table { width: 100%; border-collapse: collapse; font-size: 11px; min-width: 700px; }
        th, td { padding: 8px 6px; text-align: center; border-bottom: 1px solid #30363d; white-space: nowrap; }
        th { background: #21262d; color: #8b949e; font-weight: 600; position: sticky; top: 0; }
        tr:hover { background: #21262d; }
        .emotion-hot { color: #f85149; font-weight: 600; }
        .emotion-good { color: #f0883e; font-weight: 600; }
        .emotion-normal { color: #58a6ff; font-weight: 600; }
        .emotion-ice { color: #238636; font-weight: 600; }
        .up-red { color: #f85149; }
        .down-green { color: #238636; }
        .footer { text-align: center; padding: 16px; margin-top: 16px; font-size: 12px; color: #6e7681; }
        
        /* 日期切换器样式 */
        .date-switcher { display: flex; align-items: center; justify-content: center; gap: 12px; margin-bottom: 16px; }
        .date-arrow { width: 32px; height: 32px; border-radius: 50%; background: #21262d; border: 1px solid #30363d; color: #c9d1d9; font-size: 16px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.2s; }
        .date-arrow:hover { background: #30363d; color: #58a6ff; }
        .date-arrow:disabled { opacity: 0.3; cursor: not-allowed; }
        .date-display { font-size: 15px; font-weight: 600; color: #c9d1d9; min-width: 140px; text-align: center; }
        
        /* AI分析卡片样式 */
        .analysis-section { background: #161b22; border: 1px solid #30363d; border-radius: 12px; padding: 16px; margin-bottom: 16px; }
        .analysis-section h3 { font-size: 15px; color: #c9d1d9; margin-bottom: 12px; font-weight: 600; padding-left: 8px; border-left: 3px solid #58a6ff; }
        .analysis-card { background: #21262d; border-radius: 8px; padding: 12px; margin-bottom: 10px; }
        .analysis-card .date { font-size: 13px; color: #8b949e; margin-bottom: 6px; }
        .analysis-card .phase { font-size: 15px; color: #f0883e; font-weight: 600; margin-bottom: 6px; }
        .analysis-card .action { font-size: 12px; color: #c9d1d9; margin-bottom: 6px; line-height: 1.5; }
        .analysis-card .summary { font-size: 13px; color: #58a6ff; font-weight: 500; margin-bottom: 6px; }
        .analysis-card .link { font-size: 11px; }
        .analysis-card .link a { color: #238636; text-decoration: none; }
        .analysis-card .link a:hover { text-decoration: underline; }
        
        /* 大屏双栏布局 */
        @media (min-width: 1024px) {
            .row { display: flex; gap: 20px; margin-bottom: 20px; }
            .row .chart-container { flex: 2; margin-bottom: 0; }
            .row .card-container { flex: 1; }
            .card-container { background: #161b22; border: 1px solid #30363d; border-radius: 12px; padding: 20px; }
            .card-title { font-size: 16px; color: #c9d1d9; font-weight: 600; margin-bottom: 15px; padding-left: 8px; border-left: 3px solid #58a6ff; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header"><h1>A股市场短线情绪走势</h1></div>
        
        <!-- 日期切换器 -->
        <div class="date-switcher">
            <button class="date-arrow" id="prevDate">&lt;</button>
            <div class="date-display" id="dateDisplay">加载中...</div>
            <button class="date-arrow" id="nextDate">&gt;</button>
        </div>
        
        <!-- K线图 -->
        <div class="chart-container">
            <div class="chart-title">
                <span>东财全A指数</span>
                <select class="index-selector" id="indexSelector">
                    <option value="000985">东财全A</option>
                    <option value="000001">上证指数</option>
                    <option value="399006">创业板指</option>
                </select>
            </div>
            <div id="klineChart"></div>
        </div>
        
        <!-- 情绪图 -->
        <div class="chart-container">
            <div class="chart-title">短线情绪走势图</div>
            <div id="sentimentChart"></div>
        </div>
        
        <!-- AI分析结论 -->
        <div class="analysis-section">
            <h3>AI情绪研判</h3>
            <div id="analysisList"></div>
        </div>
        
        <!-- 数据表格 -->
        <div class="data-table">
            <h3>历史数据明细（13项指标）</h3>
            <table id="dataTable">
                <thead>
                    <tr>
                        <th>日期</th><th>情绪</th><th>量能</th><th>上涨</th><th>下跌</th>
                        <th>涨停</th><th>跌停</th><th>大幅回撤</th><th>连板高度</th><th>连板表现</th>
                        <th>连板晋级率</th><th>涨停表现</th><th>封板率</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
        
        <div class="footer">数据更新于：2026-02-24 16:57</div>
    </div>

    <script>
        const marketData = [{"date": "2026-02-24", "sentiment_index": 63, "limit_up": 92, "limit_down": 15, "major_pullback": 2, "volume": 22021.0, "consecutive_height": 4, "up_count": 3764, "down_count": 1344, "seal_rate": "69.2%", "limit_up_performance": "1.89%", "consecutive_performance": "2.01%", "consecutive_promotion_rate": "21.9%"}, {"date": "2026-02-13", "sentiment_index": 35, "limit_up": 32, "limit_down": 12, "major_pullback": 6, "volume": 19827.0, "consecutive_height": 5, "up_count": 1430, "down_count": 3653, "seal_rate": "74.4%", "limit_up_performance": "-1.04%", "consecutive_performance": "-0.90%", "consecutive_promotion_rate": "8.3%"}, {"date": "2026-02-12", "sentiment_index": 53, "limit_up": 60, "limit_down": 13, "major_pullback": 2, "volume": 21417.0, "consecutive_height": 4, "up_count": 1995, "down_count": 3109, "seal_rate": "75.9%", "limit_up_performance": "2.46%", "consecutive_performance": "1.62%", "consecutive_promotion_rate": "33.3%"}, {"date": "2026-02-11", "sentiment_index": 45, "limit_up": 51, "limit_down": 5, "major_pullback": 9, "volume": 19843.0, "consecutive_height": 4, "up_count": 1977, "down_count": 3030, "seal_rate": "75.0%", "limit_up_performance": "0.12%", "consecutive_performance": "3.25%", "consecutive_promotion_rate": "18.3%"}, {"date": "2026-02-10", "sentiment_index": 54, "limit_up": 60, "limit_down": 2, "major_pullback": 4, "volume": 21055.0, "consecutive_height": 3, "up_count": 2151, "down_count": 2884, "seal_rate": "88.2%", "limit_up_performance": "2.86%", "consecutive_performance": "-0.11%", "consecutive_promotion_rate": "25.3%"}, {"date": "2026-02-09", "sentiment_index": 74, "limit_up": 83, "limit_down": 3, "major_pullback": 1, "volume": 22495.0, "consecutive_height": 5, "up_count": 4372, "down_count": 717, "seal_rate": "76.9%", "limit_up_performance": "3.45%", "consecutive_performance": "4.97%", "consecutive_promotion_rate": "25.5%"}, {"date": "2026-02-06", "sentiment_index": 48, "limit_up": 55, "limit_down": 5, "major_pullback": 6, "volume": 21457.0, "consecutive_height": 4, "up_count": 2574, "down_count": 2444, "seal_rate": "67.9%", "limit_up_performance": "0.31%", "consecutive_performance": "4.48%", "consecutive_promotion_rate": "18.2%"}, {"date": "2026-02-05", "sentiment_index": 40, "limit_up": 44, "limit_down": 15, "major_pullback": 4, "volume": 21762.0, "consecutive_height": 4, "up_count": 1588, "down_count": 3462, "seal_rate": "81.5%", "limit_up_performance": "0.83%", "consecutive_performance": "2.40%", "consecutive_promotion_rate": "14.7%"}, {"date": "2026-02-04", "sentiment_index": 58, "limit_up": 68, "limit_down": 5, "major_pullback": 6, "volume": 24810.0, "consecutive_height": 4, "up_count": 3141, "down_count": 1960, "seal_rate": "78.2%", "limit_up_performance": "3.41%", "consecutive_performance": "3.11%", "consecutive_promotion_rate": "18.8%"}, {"date": "2026-02-03", "sentiment_index": 70, "limit_up": 69, "limit_down": 9, "major_pullback": 0, "volume": 25442.0, "consecutive_height": 4, "up_count": 4583, "down_count": 514, "seal_rate": "79.3%", "limit_up_performance": "4.35%", "consecutive_performance": "5.78%", "consecutive_promotion_rate": "27.8%"}, {"date": "2026-02-02", "sentiment_index": 31, "limit_up": 36, "limit_down": 98, "major_pullback": 3, "volume": 25848.0, "consecutive_height": 3, "up_count": 738, "down_count": 4395, "seal_rate": "66.7%", "limit_up_performance": "0.56%", "consecutive_performance": "3.91%", "consecutive_promotion_rate": "20.8%"}, {"date": "2026-01-30", "sentiment_index": 47, "limit_up": 48, "limit_down": 52, "major_pullback": 12, "volume": 28355.0, "consecutive_height": 5, "up_count": 2360, "down_count": 2703, "seal_rate": "69.6%", "limit_up_performance": "-0.97%", "consecutive_performance": "-1.50%", "consecutive_promotion_rate": "8.5%"}, {"date": "2026-01-29", "sentiment_index": 62, "limit_up": 82, "limit_down": 12, "major_pullback": 9, "volume": 32300.0, "consecutive_height": 8, "up_count": 1718, "down_count": 3363, "seal_rate": "70.7%", "limit_up_performance": "3.07%", "consecutive_performance": "4.87%", "consecutive_promotion_rate": "16.2%"}, {"date": "2026-01-28", "sentiment_index": 53, "limit_up": 80, "limit_down": 5, "major_pullback": 7, "volume": 29654.0, "consecutive_height": 7, "up_count": 1631, "down_count": 3460, "seal_rate": "75.5%", "limit_up_performance": "2.09%", "consecutive_performance": "5.12%", "consecutive_promotion_rate": "18.9%"}, {"date": "2026-01-27", "sentiment_index": 52, "limit_up": 53, "limit_down": 2, "major_pullback": 2, "volume": 28950.0, "consecutive_height": 6, "up_count": 1856, "down_count": 3237, "seal_rate": "74.6%", "limit_up_performance": "2.62%", "consecutive_performance": "4.59%", "consecutive_promotion_rate": "20.0%"}, {"date": "2026-01-26", "sentiment_index": 52, "limit_up": 70, "limit_down": 30, "major_pullback": 18, "volume": 32482.0, "consecutive_height": 5, "up_count": 1538, "down_count": 3547, "seal_rate": "64.2%", "limit_up_performance": "0.23%", "consecutive_performance": "0.40%", "consecutive_promotion_rate": "14.4%"}, {"date": "2026-01-23", "sentiment_index": 96, "limit_up": 104, "limit_down": 0, "major_pullback": 2, "volume": 30852.0, "consecutive_height": 18, "up_count": 3707, "down_count": 1336, "seal_rate": "85.0%", "limit_up_performance": "2.34%", "consecutive_performance": "1.38%", "consecutive_promotion_rate": "17.8%"}, {"date": "2026-01-22", "sentiment_index": 86, "limit_up": 73, "limit_down": 2, "major_pullback": 3, "volume": 26917.0, "consecutive_height": 17, "up_count": 3373, "down_count": 1696, "seal_rate": "73.5%", "limit_up_performance": "3.19%", "consecutive_performance": "4.46%", "consecutive_promotion_rate": "21.5%"}, {"date": "2026-01-21", "sentiment_index": 77, "limit_up": 79, "limit_down": 4, "major_pullback": 1, "volume": 26006.0, "consecutive_height": 16, "up_count": 2962, "down_count": 2045, "seal_rate": "75.7%", "limit_up_performance": "2.15%", "consecutive_performance": "3.20%", "consecutive_promotion_rate": "14.8%"}, {"date": "2026-01-20", "sentiment_index": 67, "limit_up": 54, "limit_down": 16, "major_pullback": 5, "volume": 27777.0, "consecutive_height": 15, "up_count": 2139, "down_count": 2918, "seal_rate": "77.9%", "limit_up_performance": "2.50%", "consecutive_performance": "3.80%", "consecutive_promotion_rate": "14.8%"}, {"date": "2026-01-19", "sentiment_index": 80, "limit_up": 88, "limit_down": 23, "major_pullback": 6, "volume": 27083.0, "consecutive_height": 14, "up_count": 3408, "down_count": 1664, "seal_rate": "81.3%", "limit_up_performance": "2.72%", "consecutive_performance": "2.17%", "consecutive_promotion_rate": "19.0%"}, {"date": "2026-01-16", "sentiment_index": 49, "limit_up": 58, "limit_down": 46, "major_pullback": 13, "volume": 30262.0, "consecutive_height": 5, "up_count": 2251, "down_count": 2807, "seal_rate": "59.8%", "limit_up_performance": "-0.32%", "consecutive_performance": "-3.04%", "consecutive_promotion_rate": "10.9%"}, {"date": "2026-01-15", "sentiment_index": 52, "limit_up": 55, "limit_down": 63, "major_pullback": 22, "volume": 29055.0, "consecutive_height": 4, "up_count": 2168, "down_count": 2898, "seal_rate": "75.3%", "limit_up_performance": "-2.33%", "consecutive_performance": "-1.23%", "consecutive_promotion_rate": "15.7%"}, {"date": "2026-01-14", "sentiment_index": 70, "limit_up": 102, "limit_down": 14, "major_pullback": 10, "volume": 39414.0, "consecutive_height": 5, "up_count": 2562, "down_count": 2493, "seal_rate": "62.7%", "limit_up_performance": "3.96%", "consecutive_performance": "5.81%", "consecutive_promotion_rate": "30.3%"}, {"date": "2026-01-13", "sentiment_index": 76, "limit_up": 66, "limit_down": 49, "major_pullback": 76, "volume": 36510.0, "consecutive_height": 13, "up_count": 1519, "down_count": 3547, "seal_rate": "52.4%", "limit_up_performance": "1.01%", "consecutive_performance": "2.70%", "consecutive_promotion_rate": "15.8%"}, {"date": "2026-01-12", "sentiment_index": 100, "limit_up": 183, "limit_down": 3, "major_pullback": 4, "volume": 36014.0, "consecutive_height": 12, "up_count": 3871, "down_count": 1167, "seal_rate": "79.1%", "limit_up_performance": "6.40%", "consecutive_performance": "8.60%", "consecutive_promotion_rate": "46.8%"}, {"date": "2026-01-09", "sentiment_index": 88, "limit_up": 94, "limit_down": 1, "major_pullback": 9, "volume": 31227.0, "consecutive_height": 11, "up_count": 3718, "down_count": 1271, "seal_rate": "66.7%", "limit_up_performance": "3.05%", "consecutive_performance": "5.13%", "consecutive_promotion_rate": "20.7%"}, {"date": "2026-01-08", "sentiment_index": 87, "limit_up": 92, "limit_down": 3, "major_pullback": 3, "volume": 28003.0, "consecutive_height": 10, "up_count": 3532, "down_count": 1514, "seal_rate": "76.0%", "limit_up_performance": "3.92%", "consecutive_performance": "7.50%", "consecutive_promotion_rate": "32.5%"}, {"date": "2026-01-07", "sentiment_index": 80, "limit_up": 80, "limit_down": 3, "major_pullback": 11, "volume": 28541.0, "consecutive_height": 14, "up_count": 2077, "down_count": 3003, "seal_rate": "64.5%", "limit_up_performance": "1.42%", "consecutive_performance": "2.42%", "consecutive_promotion_rate": "19.2%"}, {"date": "2026-01-06", "sentiment_index": 100, "limit_up": 120, "limit_down": 1, "major_pullback": 4, "volume": 28065.0, "consecutive_height": 13, "up_count": 3843, "down_count": 1201, "seal_rate": "82.4%", "limit_up_performance": "5.97%", "consecutive_performance": "6.39%", "consecutive_promotion_rate": "39.8%"}, {"date": "2026-01-05", "sentiment_index": 81, "limit_up": 108, "limit_down": 8, "major_pullback": 2, "volume": 25463.0, "consecutive_height": 7, "up_count": 3958, "down_count": 1111, "seal_rate": "80.5%", "limit_up_performance": "2.30%", "consecutive_performance": "-0.39%", "consecutive_promotion_rate": "24.6%"}];
        const dailyReports = [{"date": "2026-02-24", "phase": "情绪修复期/新周期启动初期", "action": "关注低位首板/二板新题材、科技成长方向；回避节前高位连板股、缩量加速板。", "summary": "节后首日情绪修复到位，明日分化预期，控仓参与低位新方向，回避高位接力。", "mowen_link": "https://note.mowen.cn/detail/VRYzIpA6fy1ZIEFHU2hW1"}];
        const klineData = [{"date": "2026-02-13", "open": 6267.77, "close": 6227.54, "high": 6297.89, "low": 6223.87, "volume": 1117860733.0, "ma5": 6272.51, "ma10": 6225.12, "ma50": 6071.88}, {"date": "2026-02-12", "open": 6281.02, "close": 6299.9, "high": 6309.49, "low": 6267.16, "volume": 1201609826.0, "ma5": 6259.33, "ma10": 6228.28, "ma50": 6061.54}, {"date": "2026-02-11", "open": 6273.74, "close": 6272.72, "high": 6298.35, "low": 6272.21, "volume": 1154950566.0, "ma5": 6234.57, "ma10": 6230.27, "ma50": 6050.55}, {"date": "2026-02-10", "open": 6282.4, "close": 6283.26, "high": 6296.57, "low": 6259.53, "volume": 1231659007.0, "ma5": 6229.12, "ma10": 6236.14, "ma50": 6040.84}, {"date": "2026-02-09", "open": 6241.44, "close": 6279.14, "high": 6279.76, "low": 6225.5, "volume": 1278459467.0, "ma5": 6215.89, "ma10": 6240.2, "ma50": 6029.83}, {"date": "2026-02-06", "open": 6115.08, "close": 6161.61, "high": 6218.09, "low": 6092.7, "volume": 1263385587.0, "ma5": 6177.72, "ma10": 6243.76, "ma50": 6018.05}, {"date": "2026-02-05", "open": 6190.56, "close": 6176.13, "high": 6214.73, "low": 6143.44, "volume": 1297917525.0, "ma5": 6197.23, "ma10": 6263.28, "ma50": 6008.62}, {"date": "2026-02-04", "open": 6202.45, "close": 6245.44, "high": 6250.08, "low": 6174.08, "volume": 1465472640.0, "ma5": 6225.96, "ma10": 6275.48, "ma50": 5998.62}, {"date": "2026-02-03", "open": 6149.25, "close": 6217.13, "high": 6218.25, "low": 6093.59, "volume": 1395121896.0, "ma5": 6243.17, "ma10": 6277.96, "ma50": 5985.89}, {"date": "2026-02-02", "open": 6205.84, "close": 6088.28, "high": 6244.23, "low": 6086.53, "volume": 1516257931.0, "ma5": 6264.5, "ma10": 6279.8, "ma50": 5973.06}, {"date": "2026-01-30", "open": 6272.92, "close": 6259.18, "high": 6302.48, "low": 6153.36, "volume": 1678482287.0, "ma5": 6309.81, "ma10": 6298.22, "ma50": 5966.41}, {"date": "2026-01-29", "open": 6330.6, "close": 6319.77, "high": 6352.77, "low": 6300.78, "volume": 1872711355.0, "ma5": 6329.34, "ma10": 6296.99, "ma50": 5957.09}, {"date": "2026-01-28", "open": 6338.22, "close": 6331.49, "high": 6355.98, "low": 6301.94, "volume": 1678589693.0, "ma5": 6324.99, "ma10": 6291.0, "ma50": 5946.88}, {"date": "2026-01-27", "open": 6297.0, "close": 6323.78, "high": 6348.01, "low": 6227.9, "volume": 1637572622.0, "ma5": 6312.75, "ma10": 6284.89, "ma50": 5937.54}, {"date": "2026-01-26", "open": 6377.55, "close": 6314.82, "high": 6391.28, "low": 6294.68, "volume": 1882125577.0, "ma5": 6295.11, "ma10": 6277.66, "ma50": 5928.5}, {"date": "2026-01-23", "open": 6312.49, "close": 6356.82, "high": 6361.96, "low": 6308.82, "volume": 1739700671.0, "ma5": 6286.63, "ma10": 6278.74, "ma50": 5921.17}, {"date": "2026-01-22", "open": 6289.69, "close": 6298.06, "high": 6308.24, "low": 6266.42, "volume": 1509534339.0, "ma5": 6264.65, "ma10": 6264.82, "ma50": 5911.46}, {"date": "2026-01-21", "open": 6212.96, "close": 6270.26, "high": 6293.74, "low": 6212.96, "volume": 1437210715.0, "ma5": 6257.0, "ma10": 6249.57, "ma50": 5903.42}, {"date": "2026-01-20", "open": 6277.54, "close": 6235.57, "high": 6292.45, "low": 6185.38, "volume": 1590754385.0, "ma5": 6257.03, "ma10": 6236.8, "ma50": 5896.54}, {"date": "2026-01-19", "open": 6227.3, "close": 6272.45, "high": 6292.94, "low": 6227.07, "volume": 1495743468.0, "ma5": 6260.21, "ma10": 6226.42, "ma50": 5889.9}, {"date": "2026-01-16", "open": 6285.05, "close": 6246.92, "high": 6306.03, "low": 6235.71, "volume": 1644756269.0, "ma5": 6270.85, "ma10": 6202.77, "ma50": 5882.83}, {"date": "2026-01-15", "open": 6231.5, "close": 6259.82, "high": 6284.05, "low": 6214.07, "volume": 1627702323.0, "ma5": 6265.0, "ma10": 6169.99, "ma50": 5874.85}, {"date": "2026-01-14", "open": 6255.98, "close": 6270.41, "high": 6371.55, "low": 6213.18, "volume": 2237951313.0, "ma5": 6242.14, "ma10": 6136.9, "ma50": 5866.21}, {"date": "2026-01-13", "open": 6339.16, "close": 6251.44, "high": 6339.23, "low": 6231.2, "volume": 2039220065.0, "ma5": 6216.57, "ma10": 6101.97, "ma50": 5858.58}, {"date": "2026-01-12", "open": 6252.44, "close": 6325.64, "high": 6333.03, "low": 6227.18, "volume": 1962291309.0, "ma5": 6192.62, "ma10": 6070.66, "ma50": 5850.88}, {"date": "2026-01-09", "open": 6140.35, "close": 6217.68, "high": 6220.46, "low": 6140.35, "volume": 1716232795.0, "ma5": 6134.69, "ma10": 6029.95, "ma50": 5842.35}, {"date": "2026-01-08", "open": 6124.98, "close": 6145.54, "high": 6164.19, "low": 6115.15, "volume": 1561497972.0, "ma5": 6074.98, "ma10": 5996.55, "ma50": 5837.22}, {"date": "2026-01-07", "open": 6140.61, "close": 6142.57, "high": 6167.26, "low": 6111.37, "volume": 1573310954.0, "ma5": 6031.66, "ma10": 5965.14, "ma50": 5832.17}, {"date": "2026-01-06", "open": 6040.17, "close": 6131.69, "high": 6131.69, "low": 6039.95, "volume": 1611208940.0, "ma5": 5987.37, "ma10": 5934.44, "ma50": 5827.58}, {"date": "2026-01-05", "open": 5955.76, "close": 6035.98, "high": 6035.98, "low": 5955.76, "volume": 1403929953.0, "ma5": 5948.69, "ma10": 5899.02, "ma50": 5821.8}];
        
        let currentDateIndex = 0;
        
        function getEmotionStatus(value) {
            if (value >= 75) return { text: '火爆', color: '#f85149' };
            if (value >= 50) return { text: '良好', color: '#f0883e' };
            if (value >= 25) return { text: '一般', color: '#58a6ff' };
            return { text: '冰点', color: '#238636' };
        }
        
        function formatDate(dateStr) {
            const parts = dateStr.split('-');
            return parts[1] + '-' + parts[2];
        }
        
        function updateDateDisplay() {
            const dateDisplay = document.getElementById('dateDisplay');
            const prevBtn = document.getElementById('prevDate');
            const nextBtn = document.getElementById('nextDate');
            
            if (marketData.length > 0) {
                dateDisplay.textContent = marketData[currentDateIndex].date;
                prevBtn.disabled = currentDateIndex >= marketData.length - 1;
                nextBtn.disabled = currentDateIndex <= 0;
            }
        }
        
        function renderKlineChart() {
            const chart = echarts.init(document.getElementById('klineChart'));
            
            if (klineData.length === 0) {
                chart.setOption({
                    title: { text: '暂无K线数据', left: 'center', textStyle: { color: '#8b949e' } }
                });
                return;
            }
            
            const dates = klineData.map(d => formatDate(d.date)).reverse();
            const klines = klineData.map(d => [d.open, d.close, d.low, d.high]).reverse();
            const ma5 = klineData.map(d => d.ma5).reverse();
            const ma10 = klineData.map(d => d.ma10).reverse();
            const ma50 = klineData.map(d => d.ma50).reverse();
            
            chart.setOption({
                backgroundColor: 'transparent',
                grid: { left: '6%', right: '8%', bottom: '10%', top: '5%', containLabel: true },
                xAxis: { type: 'category', data: dates, axisLine: { lineStyle: { color: '#30363d' } }, axisLabel: { color: '#8b949e', fontSize: 11 } },
                yAxis: { type: 'value', axisLine: { lineStyle: { color: '#30363d' } }, axisLabel: { color: '#8b949e' }, splitLine: { lineStyle: { color: '#21262d', type: 'dashed' } } },
                series: [
                    { name: 'K线', type: 'candlestick', data: klines, itemStyle: { color: '#f85149', color0: '#238636', borderColor: '#f85149', borderColor0: '#238636' } },
                    { name: 'MA5', type: 'line', data: ma5, smooth: true, lineStyle: { width: 1, color: '#f0883e' }, symbol: 'none' },
                    { name: 'MA10', type: 'line', data: ma10, smooth: true, lineStyle: { width: 1, color: '#58a6ff' }, symbol: 'none' },
                    { name: 'MA50', type: 'line', data: ma50, smooth: true, lineStyle: { width: 1, color: '#238636' }, symbol: 'none' }
                ],
                tooltip: { trigger: 'axis', backgroundColor: '#161b22', borderColor: '#30363d', textStyle: { color: '#c9d1d9' } }
            });
        }
        
        function renderSentimentChart() {
            const chart = echarts.init(document.getElementById('sentimentChart'));
            const dates = marketData.map(d => formatDate(d.date)).reverse();
            const values = marketData.map(d => d.sentiment_index).reverse();
            const dataPoints = values.map(val => ({ value: val, itemStyle: { color: getEmotionStatus(val).color } }));
            
            chart.setOption({
                backgroundColor: 'transparent',
                grid: { left: '6%', right: '8%', bottom: '10%', top: '5%', containLabel: true },
                xAxis: { type: 'category', data: dates, axisLine: { lineStyle: { color: '#30363d' } }, axisLabel: { color: '#8b949e', fontSize: 11, rotate: 45 } },
                yAxis: { type: 'value', min: 0, max: 100, axisLine: { lineStyle: { color: '#30363d' } }, axisLabel: { color: '#8b949e' }, splitLine: { lineStyle: { color: '#21262d', type: 'dashed' } } },
                series: [{
                    name: '情绪指标', data: dataPoints, type: 'line', smooth: true, lineStyle: { width: 2 }, symbol: 'circle', symbolSize: 6,
                    areaStyle: { color: { type: 'linear', x: 0, y: 0, x2: 0, y2: 1, colorStops: [{ offset: 0, color: 'rgba(248,81,73,0.2)' },{ offset: 1, color: 'rgba(35,134,54,0.05)' }] } },
                    markLine: { silent: true, symbol: 'none', lineStyle: { type: 'dashed', width: 1 }, data: [{ yAxis: 75 },{ yAxis: 50 },{ yAxis: 25 }] }
                }],
                tooltip: { trigger: 'axis', backgroundColor: '#161b22', borderColor: '#30363d', textStyle: { color: '#c9d1d9' } }
            });
        }
        
        function renderTable() {
            const tbody = document.querySelector('#dataTable tbody');
            tbody.innerHTML = marketData.map(row => {
                const s = getEmotionStatus(row.sentiment_index);
                let c = 'emotion-ice'; 
                if(row.sentiment_index>=75)c='emotion-hot';else if(row.sentiment_index>=50)c='emotion-good';else if(row.sentiment_index>=25)c='emotion-normal';
                return '<tr><td>'+row.date+'</td><td class="'+c+'">'+row.sentiment_index+'</td><td>'+Math.round(row.volume||0).toLocaleString()+'</td><td class="up-red">'+(row.up_count||0).toLocaleString()+'</td><td class="down-green">'+(row.down_count||0).toLocaleString()+'</td><td class="up-red">'+(row.limit_up||0)+'</td><td class="down-green">'+(row.limit_down||0)+'</td><td>'+(row.major_pullback||0)+'</td><td>'+(row.consecutive_height||0)+'</td><td>'+(row.consecutive_performance||'-')+'</td><td>'+(row.consecutive_promotion_rate||'-')+'</td><td>'+(row.limit_up_performance||'-')+'</td><td>'+(row.seal_rate||'-')+'</td></tr>';
            }).join('');
        }
        
        function renderAnalysis() {
            const container = document.getElementById('analysisList');
            if (dailyReports.length === 0) {
                container.innerHTML = '<p style="color: #8b949e;">暂无分析结论</p>';
                return;
            }
            container.innerHTML = dailyReports.slice(0, 5).map(r => {
                return '<div class="analysis-card">' +
                    '<div class="date">'+r.date+'</div>' +
                    '<div class="phase">'+r.phase+'</div>' +
                    '<div class="action">'+r.action+'</div>' +
                    '<div class="summary">'+r.summary+'</div>' +
                    (r.mowen_link ? '<div class="link"><a href="'+r.mowen_link+'" target="_blank">查看完整分析 →</a></div>' : '') +
                    '</div>';
            }).join('');
        }
        
        // 初始化
        updateDateDisplay();
        renderKlineChart();
        renderSentimentChart();
        renderTable();
        renderAnalysis();
        
        // 事件监听
        document.getElementById('prevDate').addEventListener('click', () => { if(currentDateIndex < marketData.length-1) { currentDateIndex++; updateDateDisplay(); } });
        document.getElementById('nextDate').addEventListener('click', () => { if(currentDateIndex > 0) { currentDateIndex--; updateDateDisplay(); } });
        window.addEventListener('resize', () => { 
            echarts.getInstanceByDom(document.getElementById('klineChart'))?.resize();
            echarts.getInstanceByDom(document.getElementById('sentimentChart'))?.resize();
        });
    </script>
</body>
</html>